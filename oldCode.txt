localStorage.clear();

if (localStorage.getItem("username")) {
  if (!window.location.search.includes("layout")) {
    RenderStartingpage();
  } else {
    displayLayoutName();
  }
} else {
  signUppage();
}

function RenderStartingpage() {
  let username = localStorage.getItem("username");

  let keysFound = parseInt(window.localStorage.getItem("keysFound")) || 0;

  let buttonsHTML = "";
  for (let i = 1; i <= keysFound + 1; i++) {
    buttonsHTML += `<button onclick="goToLayout('layout${i}')">Layout ${i}</button>`;
  }

  document.querySelector("body").innerHTML = `
    <h1>Welcome</h1>
    <h3>${username}</h3>
    ${buttonsHTML}
    <button onclick="continueToNextLayout()">Continue</button>
  `;
}

function continueToNextLayout(nextLayoutNumber) {
  window.localStorage.setItem("keysFound", nextLayoutNumber - 1);
  window.location.href = `?layout=layout${nextLayoutNumber}`;
}

function goToLayout(layoutName) {
  window.location.href = `?layout=${layoutName}`;
}

function displayLayoutName() {
  const urlParams = new URLSearchParams(window.location.search);
  const layoutParam = urlParams.get("layout");

 
  if (layoutParam) {
    const layoutNumber = parseInt(layoutParam.replace("layout", ""));

    const h1Element = document.createElement("h1");
    h1Element.textContent = `Layout ${layoutNumber}`;

    const continueButton = document.createElement("button");
    continueButton.textContent = "Continue";
    continueButton.onclick = function () {
      continueToNextLayout(layoutNumber + 1); // Pass the next layout number
    };

    document.body.appendChild(h1Element);
    document.body.appendChild(continueButton);
  }
}


//Vi kan inte ha case layout1, vi behöver alltid kolla layout och keysFound så att det är samma, oavsett vart man är. OM DE ÄR SAMMA skapa en knapp som ++ keysFound och layoutNumber